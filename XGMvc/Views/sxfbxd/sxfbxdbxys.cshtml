<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>报销预算</title>
    <link rel="stylesheet" type="text/css" href="../../Js/jquery-easyui-1.3.4/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../test/test/style.css" />
    <link rel="stylesheet" type="text/css" href="../../Js/jquery-easyui-1.3.4/themes/icon.css" />
    <script language="javascript" type="text/javascript" src="../../Js/jquery-easyui-1.3.4/jquery-1.7.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="../../Js/jquery-easyui-1.3.4/jquery.easyui.min.js"></script>
    <script language="javascript" type="text/javascript" src="../../Js/jquery-easyui-1.3.4/locale/easyui-lang-zh_CN.js"></script>
    <script language="javascript" type="text/javascript" src="../../Js/json2.js"></script>
    <script language="javascript" type="text/javascript" src="../../Js/jquery.easyui.extendTest.js"></script>
</head>
<body>
    <div class="easyui-layout" id="parti-datareguin" data-options="fit:true" z="1">
        <div data-options="region:'north'" style="height: 50px">
            <div style="padding: 2px 0 2px 2px; background: #fafafa; border: 1px solid #ccc;">
                <a href="#" class="easyui-linkbutton" id="parti-add" data-options="plain:'true',iconCls:'icon-queding',
                   scope:'parti',status:'0'">确定</a> <a href="#" class="easyui-linkbutton" id="parti-edit"
                       data-options="plain:'true',iconCls:'icon-quxiao',
                   scope:'parti',status:'0'">取消</a></div>
        </div>
        <div data-options="region:'center'" style="width: 270px">
            <table border="0" style="height: 410px; width: 550px; margin: 5px">
                <tr>
                    <td colspan="8" style="width: 240px; height: 80px">
                        <div style="font-size: x-large; text-align: center;">
                            预算执行情况统计</div>
                    </td>
                </tr>
                <tr>
                    <td style="width: 60px; height: 50px;">
                        <label>
                            项目名称</label>
                    </td>
                    <td>
                        <input class="easyui-validatebox" id="sxfbxd-BX_Detail-GUID_Project" style="width: 200px"
                            data-options="forbidstatus:[0,3]"></input>
                    </td>
                    <td style="width: 60px; height: 50px;">
                        <label>
                            项目编号</label>
                    </td>
                    <td>
                        <input class="easyui-numberbox" id="sxfbxd-BX_Detail-GUID_Project" style="width: 200px"
                            data-options="forbidstatus:[0,3]"></input>
                    </td>
                </tr>
                <tr>
                    <td colspan="6">
                        <table class="easyui-edatagrid" id="sxfbxd-BX_Detail" data-options="
                            fitColumns:false,
                            pagination:false,
                            method:'get',
                            singleSelect:true,
                            checkOnSelect:true,
                            height:280,width:941,
                           scope:'sxfbxd',
                           forbidstatus:{
                              'sxfbxd-BX_Detail-GUID_BGCode':[0,3],
                              'sxfbxd-BX_Detail-TotalReal':[0,3],
                              'sxfbxd-BX_Detail-FeeMemo':[0,3],
                              'sxfbxd-BX_Detail-ProjectKey':[-1],
                              'sxfbxd-BX_Detail-GUID_Project':[0,3],
                              'sxfbxd-CN_PaymentNumber-IsGuoKu':[0,3],
                              'sxfbxd-BX_Detail-GUID_Department':[0,3],
                              'sxfbxd-BX_Detail-GUID_SettleType':[0,3],
                              'sxfbxd-BX_Detail-GUID_BGType':[0,3],
                              'sxfbxd-BX_Detail-PaymentNumber':[0,3]
                           },
                           copyField:[
                                'sxfbxd-BX_Detail-ProjectKey',
                                'sxfbxd-BX_Detail-GUID_Project',
                                'sxfbxd-BX_Detail-GUID_SettleType',
                                'sxfbxd-BX_Detail-GUID_Person',
                                'sxfbxd-BX_Detail-GUID_Department'
                            ],
                           fieldformula:[
                              {name:'csum',field:'sxfbxd-BX_Detail-TotalReal',target:['sxfbxd-moneyunmber','sxfbxd-moneychinese']},
                              {name:'cconcat',field:'sxfbxd-BX_Detail-FeeMemo',target:['sxfbxd-BX_Main-DocMemo']}
                          ]" line="true">
                            <thead>
                                <tr>
                                    <th field="b-sel" data-options="width:100,checkbox:'true'">
                                    </th>
                                    <th field="sxfbxd-BX_Detail-GUID" hidden="true">
                                    </th>
                                    <th field="sxfbxd-BX_Detail-GUID_Person" hidden="true">
                                    </th>
                                    <th field="sxfbxd-CN_PaymentNumber-GUID" hidden="true">
                                    </th>
                                    <th field="sxfbxd-CN_PaymentNumber-IsProject" hidden="true">
                                    </th>
                                    <th field="sxfbxd-CN_PaymentNumber-GUID_EconomyClass" hidden="true">
                                    </th>
                                    <th field="sxfbxd-CN_PaymentNumber-GUID_FunctionClass" hidden="true">
                                    </th>
                                    <th field="sxfbxd-CN_PaymentNumber-GUID_ExpendType" hidden="true">
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-GUID_InvitePerson" title="科目名称" width="90" sortable="false"
                                        align="center" editor="{type:'combogrid',
                                        options:{
                                          width:520,
                                          remoteUrl:'/Combogrid/GUID_InvitePerson',
                                          method:'get',
                                          idField:'GUID',
                                          filterField:'BGCodeKey,BGCodeName',
                                          textField:'BGCodeName',
                                          columns:[[
                                                {field:'GUID',title:'代码',width:'60',hidden:'true'},
                                                {field:'BGCodeKey',title:'科目编码',width:'60',hidden:'true'},
                                                {field:'BGCodeName',title:'科目名称',width:'300'}
                                          ]]
                                        }
                                     }">
                                        科目名称
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-InvitePersonIDCard" title="科目编号" sortable="false"
                                        align="center" width="90" editor="{type:'numberbox',options:{precision:2}}">
                                        科目编号
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-Toal_BX" width="90" title="项目名称" sortable="false"
                                        align="center" editor="text">
                                        项目名称
                                    </th>
                                    <th field="sxfbxd-BX_Detail-ProjectKey" width="90" title="应发金额" sortable="false"
                                        align="center" editor="text">
                                        应发金额
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-Toal_Tax" title="部门名称" sortable="false" align="center"
                                        width="90" editor="{
                                      type:'combogrid',
                                      options:{
                                        panelWidth:300,width:520,
                                        remoteUrl:'/Combogrid/Project',
                                        method:'get',
                                        idField:'GUID',
                                        textField:'ProjectName',
                                        filterField:'ProjectKey,ProjectName',
                                        gridassociate:{
                                            gridId:'sxfbxd-BX_Detail',map:{'sxfbxd-BX_Detail-ProjectKey':['ProjectKey']
                                        }},
                                        bindmethod: { 'onSelect': ['setAssociate'] },     
                                        columns:[[
                                          {field:'GUID',title:'GUID',hidden:true},
                                          {field:'ProjectKey',title:'部门编号',width:'160'},
                                          {field:'ProjectName',title:'部门名称',width:'300'}
                                        ]]
                                      }
                                  }">
                                        部门名称
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-Toal_Real" width="90" title="预算金额" sortable="false"
                                        align="center" editor="{type:'booleanbox'}">
                                        预算金额
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-Toal_Real" width="90" title="累计发生" sortable="false"
                                        align="center" editor="{type:'booleanbox'}">
                                        累计发生
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-Toal_Real" width="90" title="本次发生" sortable="false"
                                        align="center" editor="{type:'booleanbox'}">
                                        本次发生
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-Toal_Real" width="90" title="余额" sortable="false"
                                        align="center" editor="{type:'booleanbox'}">
                                        余额
                                    </th>
                                    <th field="sxfbxd-BX_InviteFee-FeeMemo" width="90" title="预算来源" sortable="false"
                                        align="center" editor="{
                                          type:'combogrid',
                                          options:{
                                              panelWidth:300,  
                                              width:520,
                                              remoteUrl:'/Combogrid/Department',
                                              method:'get',
                                              idField:'GUID',
                                              textField:'DepartmentName',
                                              filterField:'DepartmentKey,DepartmentName',
                                              columns:[[
                                                {field:'GUID',title:'名称',width:'60',hidden:true},
                                                {field:'DepartmentKey',title:'预算来源编号',width:'160'},
                                                {field:'DepartmentName',title:'预算来源名称',width:'300'}
                                            ]]
                                          }
                                        }">
                                        预算来源
                                    </th>
                                </tr>
                            </thead>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>
